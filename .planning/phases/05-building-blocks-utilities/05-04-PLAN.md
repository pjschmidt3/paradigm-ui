---
phase: 05-building-blocks-utilities
plan: 04
type: execute
---

<objective>
Register all new hooks in registry.json and finalize exports.

Purpose: Make hooks installable via shadcn CLI and complete Phase 5.
Output: Hooks registered in registry.json, barrel exports finalized.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-building-blocks-utilities/05-03-SUMMARY.md
@registry.json
@.planning/codebase/CONVENTIONS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Register hooks in registry.json</name>
  <files>registry.json</files>
  <action>
    Add registry entries for each hook as `registry:lib` type.

    Add these entries to the items array:
    ```json
    {
      "name": "use-disclosure",
      "type": "registry:lib",
      "title": "useDisclosure",
      "description": "Hook for managing boolean open/close state with callbacks. Ideal for modals, menus, and accordions.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-disclosure.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-toggle",
      "type": "registry:lib",
      "title": "useToggle",
      "description": "Simple hook for boolean toggle state with familiar useState-like API.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-toggle.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-media-query",
      "type": "registry:lib",
      "title": "useMediaQuery",
      "description": "Hook for responsive behavior based on CSS media queries.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-media-query.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-mobile",
      "type": "registry:lib",
      "title": "useIsMobile",
      "description": "Hook for detecting mobile viewport (< 768px). Built on useMediaQuery.",
      "dependencies": [],
      "registryDependencies": ["use-media-query"],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-mobile.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-click-outside",
      "type": "registry:lib",
      "title": "useClickOutside",
      "description": "Hook for detecting clicks outside an element. Essential for dropdowns and modals.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-click-outside.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-scroll-lock",
      "type": "registry:lib",
      "title": "useScrollLock",
      "description": "Hook for preventing body scroll. Use with modals and drawers.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-scroll-lock.ts", "type": "registry:lib" }]
    },
    {
      "name": "use-focus-trap",
      "type": "registry:lib",
      "title": "useFocusTrap",
      "description": "Hook for trapping keyboard focus within a container. Essential for accessible modals.",
      "dependencies": [],
      "meta": { "tier": "free" },
      "categories": ["hooks"],
      "files": [{ "path": "src/hooks/use-focus-trap.ts", "type": "registry:lib" }]
    }
    ```

    Place after existing registry:lib entries (utils, box-types, helper-types).
    All hooks are free tier since they're building blocks.
  </action>
  <verify>node validate-registry.js passes (if exists), otherwise JSON.parse(require('fs').readFileSync('registry.json')) in node</verify>
  <done>7 hooks registered in registry.json</done>
</task>

<task type="auto">
  <name>Task 2: Finalize barrel exports</name>
  <files>src/hooks/index.ts, src/index.ts</files>
  <action>
    Ensure src/hooks/index.ts exports all hooks:
    - useDisclosure
    - useToggle
    - useMediaQuery
    - useIsMobile
    - useClickOutside
    - useScrollLock
    - useFocusTrap

    Ensure src/index.ts re-exports from hooks:
    ```typescript
    export * from './hooks'
    ```

    Verify no duplicate exports.
  </action>
  <verify>npm run build succeeds, all hooks appear in dist/index.d.ts</verify>
  <done>All hooks exported from package entry point</done>
</task>

<task type="auto">
  <name>Task 3: Verify full test suite and build</name>
  <files>N/A (verification only)</files>
  <action>
    Run full test suite and build to verify Phase 5 complete.

    Commands:
    - npm test (all tests pass)
    - npm run build (no errors)
    - Check dist/ output includes hooks
  </action>
  <verify>npm test passes, npm run build succeeds, dist/index.d.ts contains hook exports</verify>
  <done>Phase 5 complete - 7 hooks created, tested, registered, and exported</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm test` passes all tests
- [ ] `npm run build` succeeds
- [ ] registry.json valid JSON with 7 new hook entries
- [ ] dist/index.d.ts exports all hooks
</verification>

<success_criteria>
- All tasks completed
- All tests pass
- Build succeeds
- 7 hooks registered in registry.json
- Hooks installable via shadcn CLI
- Phase 5 complete
</success_criteria>

<output>
After completion, create `.planning/phases/05-building-blocks-utilities/05-04-SUMMARY.md`

Include in summary:
- Total hooks created: 7
- All hooks: free tier
- Test count increase
- Registry entries added
</output>
